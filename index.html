<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PBIX Image Extractor ¬∑ Power BI</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap');
:root{--p:#f2c811;--pd:#d4a800;--pg:rgba(242,200,17,.12);--b:#020442;--bl:#0a0c5a;--l:#d7d8e4;--ll:#e3e4ed;--ld:#c4c5d4;--c:#e8e9f2;--ch:#eeeff6;--t:#1a1c3a;--tm:#3d3f5c;--tf:#9496ae;--f:'Inter',sans-serif;--m:'JetBrains Mono',monospace}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:var(--f);background:var(--l);color:var(--t);min-height:100vh;display:flex;flex-direction:column}

/* Header (preserved style) */
.hd{background:var(--b);padding:0 24px;height:54px;display:flex;align-items:center;gap:12px;position:relative;flex-shrink:0}
.hd::after{content:'';position:absolute;bottom:0;left:0;right:0;height:3px;background:var(--p)}
.hd .lm{width:34px;height:34px;background:#9aa0a6;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:15px}
.hd h1{font-size:1.1rem;color:#fff;font-weight:600}.hd h1 b{color:var(--p)}
.hd .hr{margin-left:auto;display:flex;align-items:center;gap:10px}
.hd .cr{font-size:.72rem;color:rgba(255,255,255,.45)}.hd .cr b{color:#fff}
.hd a.sl{display:flex;align-items:center;justify-content:center;height:28px;border-radius:6px;background:rgba(255,255,255,.07);border:1px solid rgba(255,255,255,.1);text-decoration:none;transition:all .2s}
.hd a.sl:hover{background:rgba(242,200,17,.2);border-color:var(--p);transform:translateY(-1px)}
.hd a.sl svg{width:15px;height:15px}
.hd a.sl.icon-only{width:28px;justify-content:center}
.hd a.sl.with-text{padding:0 10px;gap:5px;font-size:.68rem;font-weight:600;color:var(--p)}
.hd a.sl.with-text span{white-space:nowrap}

/* Layout */
.main{flex:1;max-width:1200px;width:100%;margin:0 auto;padding:24px;display:flex;flex-direction:column;gap:16px;overflow-y:auto}
.filter-bar{display:flex;align-items:center;gap:6px;flex-wrap:wrap}
.fpill{padding:4px 10px;border:1.5px solid var(--ld);border-radius:14px;background:var(--ll);color:var(--tf);font-size:.7rem;font-weight:600;cursor:pointer;font-family:var(--f)}
.fpill.a{background:var(--b);border-color:var(--b);color:var(--p)}
.search-sm{padding:4px 10px;border:1.5px solid var(--ld);border-radius:6px;background:var(--ll);color:var(--t);font-size:.76rem;font-family:var(--f);outline:none;width:260px;margin-left:auto}
.search-sm:focus{border-color:var(--p)}

.img-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:14px}
.img-card{background:var(--c);border:1.5px solid var(--ld);border-radius:10px;overflow:hidden;transition:all .12s;cursor:default;display:flex;flex-direction:column}
.img-card:hover{border-color:var(--p);box-shadow:0 4px 16px rgba(0,0,0,.08);transform:translateY(-2px)}
.img-preview{height:110px;background:var(--ll);display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative;font-size:56px}
.img-info{padding:12px;border-top:1px solid var(--ld);flex:1;display:flex;flex-direction:column;gap:8px}
.img-info .img-name{font-size:1rem;font-weight:700;color:var(--t);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.img-info .img-desc{font-size:.86rem;color:var(--tf);line-height:1.2}
.img-actions{display:flex;gap:8px;padding:10px;border-top:1px solid var(--ld);background:transparent;justify-content:flex-start}

/* Improved "Abrir" button */
.btn{padding:8px 12px;border:1.5px solid var(--ld);border-radius:8px;background:#fff;color:var(--t);font-size:.86rem;font-weight:700;cursor:pointer;font-family:var(--f);display:inline-flex;align-items:center;gap:8px;transition:all .12s}
.btn:hover{border-color:var(--p);color:var(--b)}
.btn.pbi{background:linear-gradient(180deg,var(--p),var(--pd));border:none;color:var(--b);font-weight:800;box-shadow:0 6px 18px rgba(242,200,17,.12)}
.btn.pbi:hover{transform:translateY(-2px)}

.lightbox{display:none;position:fixed;inset:0;background:rgba(2,4,66,.85);z-index:1000;align-items:center;justify-content:center;flex-direction:column;gap:12px;padding:20px}
.lightbox.show{display:flex}
.lightbox .modal{background:#fff;border-radius:10px;padding:18px;max-width:760px;width:100%;color:var(--t);position:relative}
.lightbox .lb-close{position:absolute;top:10px;right:10px;background:rgba(2,4,66,.05);border:1px solid rgba(2,4,66,.06);color:var(--t);width:36px;height:36px;border-radius:8px;font-size:1.2rem;cursor:pointer;display:flex;align-items:center;justify-content:center}
.lightbox .lb-close:hover{background:rgba(242,200,17,.12)}

.toast{position:fixed;bottom:18px;right:18px;background:var(--b);color:var(--p);padding:9px 20px;border-radius:8px;font-weight:700;font-size:.82rem;opacity:0;transform:translateY(14px);transition:all .3s;z-index:1001;box-shadow:0 3px 12px rgba(2,4,66,.3);border:1px solid rgba(242,200,17,.2)}
.toast.show{opacity:1;transform:translateY(0)}

.empty-state{display:block;text-align:center;padding:40px;color:var(--tf)}
.empty-state .es-icon{font-size:3rem;opacity:.3;margin-bottom:8px}

::-webkit-scrollbar{width:8px}::-webkit-scrollbar-track{background:var(--l)}::-webkit-scrollbar-thumb{background:var(--ld);border-radius:4px}
</style>
</head>
<body>

<!-- Encabezado (exacto) -->
<div class="hd">
  <div class="lm" aria-hidden>üß∞</div>
  <h1><b>BITools</b> ‚Äî Repositorio de herramientas para desarrolladores BI</h1>
  <div class="hr" role="navigation" aria-label="links">
    <span class="cr">By: <b>Gilvard P√©rez</b></span>
    <a class="sl icon-only" href="https://www.linkedin.com/in/gilvardperez/" target="_blank" rel="noopener noreferrer" title="LinkedIn">
      <svg viewBox="0 0 24 24" fill="#0A66C2" width="16" height="16" aria-hidden><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.14 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452z"/></svg>
    </a>
    <a class="sl with-text" href="https://www.skool.com/club-power-bi-9524/about" target="_blank" rel="noopener noreferrer" title="Comunidad gratuita en Skool">
      <svg viewBox="0 0 24 24" width="14" height="14" fill="var(--p)" aria-hidden><rect width="24" height="24" rx="4"/></svg>
      <span>Comunidad gratuita en Skool</span>
    </a>
  </div>
</div>

<main class="main" role="main">
  <div class="filter-bar" id="filterBar">
    <label>Filtrar:</label>
    <div id="filterPills"></div>
    <input id="searchInput" class="search-sm" placeholder="üîç Buscar por nombre o URL..." />
  </div>

  <div id="toolsGrid" class="img-grid" aria-live="polite"></div>

  <div id="emptyState" class="empty-state" style="display:none">
    <div class="es-icon">üîç</div>
    <p>Aqu√≠ aparecer√°n las herramientas que vayas indicando.</p>
  </div>
</main>

<!-- Modal (safe actions only) -->
<div class="lightbox" id="modal" onclick="if(event.target===this) closeModal()">
  <div class="modal" id="modalContent">
    <button class="lb-close" onclick="closeModal()">‚úï</button>
    <div id="modalBody"></div>
  </div>
</div>

<div id="toast" class="toast"></div>

<script>
/* Full, working index.js logic:
   - initialTools displayed reliably
   - "Abrir" button only (improved styling)
   - no copy/delete exposed
*/

const STORAGE_KEY = 'bitools_links_v1';
const initialTools = [
  { id:'t_skool_community', name:'Comunidad gratuita en Skool', url:'https://www.skool.com/club-power-bi-9524/about', icon:'üë•', desc:'√önete a la comunidad gratuita en Skool para Power BI', category:'Comunidad' },
  { id:'t_powerbi_palette_v2', name:'Power BI Palette Extractor v2', url:'https://gilvardperez.github.io/BITools/Palette_extractor.html', icon:'üé®', desc:'Herramienta para extraer paletas de colores partiendo de una imagen', category:'Herramienta' },
  { id:'t_image_extractor', name:'Image Extractor', url:'https://gilvardperez.github.io/BITools/Image_extractor.html', icon:'üñºÔ∏è', desc:'Herramienta para extraer im√°genes desde archivos o im√°genes', category:'Herramienta' },
  { id:'t_svg_to_dax', name:'SVG ‚Üí DAX Measure', url:'https://gilvardperez.github.io/BITools/SVG_to_DAX.html', icon:'üìê', desc:'Interfaz para convertir SVG en medidas DAX reutilizables para Power BI', category:'Herramienta' }
];

let tools = [];

function uid(prefix='t'){ return prefix + '_' + Math.random().toString(36).slice(2,9); }
function el(tag, attrs={}, ...children){ const e=document.createElement(tag); Object.entries(attrs||{}).forEach(([k,v])=>e.setAttribute(k,v)); children.forEach(c=>{ if(c===null||c===undefined) return; if(typeof c==='string') e.appendChild(document.createTextNode(c)); else e.appendChild(c); }); return e; }
function toast(msg){ const t=document.getElementById('toast'); t.textContent=msg; t.classList.add('show'); setTimeout(()=>t.classList.remove('show'),2000); }

function load(){
  try{
    const saved = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
    const merged = [];
    initialTools.forEach(init=>{
      const idx = saved.findIndex(s => s.id===init.id || s.url===init.url);
      if(idx>=0){ merged.push(saved[idx]); saved.splice(idx,1); } else merged.push(init);
    });
    tools = merged.concat(saved);
  }catch(e){
    tools = initialTools.slice();
  }
  renderFilters();
  renderTools();
}
function save(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(tools)); }

let filterCat = 'Todas';

function renderFilters(){
  const container = document.getElementById('filterPills');
  container.innerHTML = '';
  const counts = tools.reduce((acc,t)=>{ acc[t.category] = (acc[t.category]||0)+1; return acc; }, {});
  const allBtn = el('button',{class:'fpill a'}, `Todas (${tools.length})`);
  allBtn.addEventListener('click', ()=>{ filterCat='Todas'; renderFilters(); renderTools(); });
  container.appendChild(allBtn);
  Object.entries(counts).forEach(([cat,n])=>{
    const btn = el('button',{class:'fpill'}, `${cat} (${n})`);
    btn.addEventListener('click', ()=>{ filterCat = cat; renderFilters(); renderTools(); });
    container.appendChild(btn);
  });
}

function renderTools(){
  const grid = document.getElementById('toolsGrid');
  const empty = document.getElementById('emptyState');
  grid.innerHTML = '';
  let list = tools.slice();
  if(filterCat !== 'Todas') list = list.filter(t=>t.category === filterCat);
  const q = (document.getElementById('searchInput').value || '').toLowerCase();
  if(q) list = list.filter(t=>(t.name+' '+ (t.desc||'') + ' ' + (t.url||'')).toLowerCase().includes(q));
  if(list.length === 0){ empty.style.display = 'block'; return; } else empty.style.display = 'none';

  list.forEach(t=>{
    const card = el('div',{class:'img-card'});
    const preview = el('div',{class:'img-preview'}, t.icon || 'üîó');
    const info = el('div',{class:'img-info'}, el('div',{class:'img-name', title: t.name}, t.name), el('div',{class:'img-desc'}, t.desc || ''));

    const svgOuter = document.createElement('span');
    svgOuter.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:middle;margin-right:8px;color:#0a0c5a"><path d="M18 13v6a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>`;

    const openBtn = el('button',{class:'btn pbi', title:'Abrir'});
    openBtn.appendChild(svgOuter); openBtn.appendChild(document.createTextNode('Abrir'));
    openBtn.addEventListener('click', (ev)=>{ ev.stopPropagation(); window.open(t.url,'_blank'); toast('Abriendo ' + t.name); });

    const actions = el('div',{class:'img-actions'}, openBtn);

    card.addEventListener('click', ()=> openModal(t.id));

    card.appendChild(preview);
    card.appendChild(info);
    card.appendChild(actions);
    grid.appendChild(card);
  });
}

function openModal(id){
  const t = tools.find(x=>x.id===id); if(!t) return;
  const modal = document.getElementById('modal');
  const body = document.getElementById('modalBody');
  body.innerHTML = '';
  const title = el('h2',{}, t.name);
  const row = el('div',{style:'display:flex;gap:12px;align-items:center;margin-top:8px'}, el('div',{style:'font-size:48px'}, t.icon || 'üîó'), el('div',{}, el('div',{class:'small'}, t.desc || ''), el('div',{}, el('a',{href:t.url, target:'_blank'}, t.url))));
  const openBtn = el('button',{class:'btn pbi'}, 'Abrir'); openBtn.addEventListener('click', ()=> window.open(t.url,'_blank'));
  const btns = el('div',{style:'display:flex;gap:8px;justify-content:flex-end;margin-top:12px'}, openBtn);
  body.appendChild(title); body.appendChild(row); body.appendChild(btns);
  modal.classList.add('show');
}
function closeModal(){ document.getElementById('modal').classList.remove('show'); }

document.getElementById('searchInput').addEventListener('input', ()=> renderTools());

/* Init */
load();
window.addEventListener('resize', ()=> renderTools());
</script>
</body>
</html>
